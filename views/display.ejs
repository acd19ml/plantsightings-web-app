<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/index.css'/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel='stylesheet' href='/stylesheets/style.css' />
</head>
<body>
<h1><%= title %></h1>


    <p><strong>Date Seen:</strong> <%= plantsighting.dateSeen.toDateString() %></p>
    <p><strong>Location:</strong> Longitude: <%= plantsighting.location.coordinates[0] %>, Latitude: <%= plantsighting.location.coordinates[1] %></p>
    <p><strong>Description:</strong> <%= plantsighting.description %></p>
    <p><strong>Plant Height:</strong> <%= plantsighting.plantSize.height %> meters</p>
    <p><strong>Plant Spread:</strong> <%= plantsighting.plantSize.spread %> meters</p>
    <p><strong>Characteristics:</strong></p>
    <ul>
        <% if (plantsighting.plantCharacteristics.flowers) { %><li>Flowers</li><% } %>
        <% if (plantsighting.plantCharacteristics.leaves) { %><li>Leaves</li><% } %>
        <% if (plantsighting.plantCharacteristics.fruitsOrSeeds) { %><li>Fruits or Seeds</li><% } %>
        <li>Sun Exposure: <%= plantsighting.plantCharacteristics.sunExposure %></li>
        <% if (plantsighting.plantCharacteristics.flowerColor) { %><li>Flower Color: <%= plantsighting.plantCharacteristics.flowerColor %></li><% } %>
    </ul>
    <p><strong>Identification:</strong> <%= plantsighting.identification.name %> (<%= plantsighting.identification.status %>)</p>
    <% if (plantsighting.photo) { %>
        <img src="/<%= plantsighting.photo %>" width="200" height="200" alt="Plant Photo">
    <% } %>
    <p><strong>Nickname:</strong> <%= plantsighting.nickname %></p>
    <p>Photo path: <%= plantsighting.photo %></p>
    <hr>

<hr>
<a href="/display/<%= plantsighting._id %>/edit" class="btn btn-primary">Edit</a>

<a href="/add"><p>Add New Plant Sighting</p></a>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        var storedNickname = JSON.parse(localStorage.getItem('nickname'));
        // Ensure both are strings and trim any whitespace
        var localNickname = storedNickname ? storedNickname.trim() : '';
        var serverNickname = "<%= plantsighting.nickname %>".trim();

        // Optionally, convert both to lowercase to ignore case differences
        localNickname = localNickname.toLowerCase();
        serverNickname = serverNickname.toLowerCase();
        console.log("Local Nickname: ", localNickname);
        console.log("Server Nickname: ", serverNickname);

        if (localNickname !== serverNickname || localNickname === '') {
            var message = "The nickname does not match or is not set. You will be redirected to the homepage.";

            // Create a div element to display the message
            var messageDiv = document.createElement('div');
            messageDiv.style.position = 'fixed';
            messageDiv.style.left = '0';
            messageDiv.style.right = '0';
            messageDiv.style.top = '0';
            messageDiv.style.backgroundColor = 'red';
            messageDiv.style.color = 'white';
            messageDiv.style.textAlign = 'center';
            messageDiv.style.padding = '10px';
            messageDiv.style.fontSize = '20px';
            messageDiv.style.zIndex = '1000';
            messageDiv.innerText = message;

            // Append the message div to the body
            document.body.appendChild(messageDiv);

            setTimeout(function() {
                window.location.href = '/';
            }, 5000);
        }
    });
</script>
</body>
</html>


