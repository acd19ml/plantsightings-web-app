<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title><%= title %></title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel='stylesheet' href='/stylesheets/style.css' />
</head>
<body>
<h1><%= title %></h1>


    <p><strong>Date Seen:</strong> <%= plantsighting.dateSeen.toDateString() %></p>
    <p><strong>Location:</strong> Longitude: <%= plantsighting.location.coordinates[0] %>, Latitude: <%= plantsighting.location.coordinates[1] %></p>
    <p><strong>Description:</strong> <%= plantsighting.description %></p>
    <p><strong>Plant Height:</strong> <%= plantsighting.plantSize.height %> meters</p>
    <p><strong>Plant Spread:</strong> <%= plantsighting.plantSize.spread %> meters</p>
    <p><strong>Characteristics:</strong></p>
    <ul>
        <% if (plantsighting.plantCharacteristics.flowers) { %><li>Flowers</li><% } %>
        <% if (plantsighting.plantCharacteristics.leaves) { %><li>Leaves</li><% } %>
        <% if (plantsighting.plantCharacteristics.fruitsOrSeeds) { %><li>Fruits or Seeds</li><% } %>
        <li>Sun Exposure: <%= plantsighting.plantCharacteristics.sunExposure %></li>
        <% if (plantsighting.plantCharacteristics.flowerColor) { %><li>Flower Color: <%= plantsighting.plantCharacteristics.flowerColor %></li><% } %>
    </ul>
    <p><strong>Identification:</strong> <%= plantsighting.identification.name %> (<%= plantsighting.identification.status %>)</p>
    <% if (plantsighting.photo) { %>
        <img src="/<%= plantsighting.photo %>" width="200" height="200" alt="Plant Photo">
    <% } %>
    <p><strong>Nickname:</strong> <%= plantsighting.nickname %></p>
    <p>Photo path: <%= plantsighting.photo %></p>
<hr>
<button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#inputSuggestNameModal">Suggest a Name</button>

<!-- Input Modal -->
<div class="modal fade" id="inputSuggestNameModal" tabindex="-1" aria-labelledby="inputModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="inputModalLabel">Input Suggested Name</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="suggestNameForm" action="/display/<%= plantsighting._id %>/add-suggest-name" method="POST" enctype="multipart/form-data">
                    <div class="mb-3">
                        <label for="suggestedName" class="form-label">Suggested Name</label>
                        <input type="text" class="form-control" id="suggestedName" name="suggestedName" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>
            </div>
        </div>
    </div>
</div>

<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#suggestNameModal">Choose Suggested Names</button>

<!-- Modal -->
<div class="modal fade" id="suggestNameModal" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalLabel">Suggested Names</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="updateNameForm" action="/display/<%= plantsighting._id %>/update-name" method="POST">
                    <div class="mb-3">
                        <label for="selectedName" class="form-label">Select a Suggested Name</label>
                        <select class="form-select" id="selectedName" name="selectedName" required>
                            <% if (plantsighting.suggest_name && plantsighting.suggest_name.length > 0) { %>
                                <% plantsighting.suggest_name.forEach(function(name) { %>
                                    <option value="<%= name %>"><%= name %></option>
                                <% }); %>
                            <% } else { %>
                                <option>No suggested names available</option>
                            <% } %>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary">Update Name</button>
                </form>
            </div>
        </div>
    </div>
</div>

<hr>




<!--<a href="/display/<%= plantsighting._id %>/edit" class="btn btn-primary">Edit</a>-->


<a href="/add"><p>Add New Plant Sighting</p></a>
</body>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

</html>


