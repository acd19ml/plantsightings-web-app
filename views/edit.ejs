<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/add.css'/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel='stylesheet' href='/stylesheets/style.css' />
</head>
<body>
<div class="container">
    <h1 class="text-center"><%= title %></h1>
    <br>
    <form action="/display/<%= plantsighting._id %>/update" method="POST" enctype="multipart/form-data">
        <div class="row">
            <!-- first column -->
            <div class="col-md-5">
                <!-- nickname -->
                <div class="mb-3">
                    <label for="nickname" class="form-label">Nickname:</label>
                    <input class="form-control" type="text" id="nickname" name="nickname" value="<%= plantsighting.nickname %>" required>
                </div>
                <!-- date -->
                <div class="mb-3">
                    <label for="dateSeen" class="form-label">Date Seen:</label>
                    <input class="form-control" type="date" id="dateSeen" name="dateSeen" value="<%= plantsighting.dateSeen.toISOString().split('T')[0] %>" required>
                </div>
                <!-- photo -->
                <div class="mb-3">
                    <!-- Note: For editing, you might want to display the current photo and allow for a new upload -->
                    <label for="photo" class="form-label">Photo:</label>
                    <img src="/<%= plantsighting.photo %>" width="100" alt="Current Photo">
                    <input class="form-control" type="file" name="myImg" accept="image/*">
                </div>
                <!-- location -->
                <div class="mb-3">
                    <label for="location" class="form-label">Location (Longitude, Latitude):</label>
                    <input class="form-control" type="text" name="location" placeholder="e.g., -73.935242, 40.730610" value="<%= plantsighting.location.coordinates.join(', ') %>" required>
                </div>
                <!-- identification name -->
<!--                <div class="mb-3">-->
<!--                    <label for="identificationName" class="form-label">Identification Name:</label>-->
<!--                    <input class="form-control" type="text" id="identificationName" name="identificationName" value="<%= plantsighting.identification.name %>" required>-->
<!--                </div>-->
                <!-- identification status -->
                <div class="mb-3">
                    <label for="identificationStatus" class="form-label">Identification Status:</label>
                    <select class="form-control" id="identificationStatus" name="identificationStatus" required>
                        <option value="completed" <%= plantsighting.identification.status === 'completed' ? 'selected' : '' %>>Completed</option>
                        <option value="in-progress" <%= plantsighting.identification.status === 'in-progress' ? 'selected' : '' %>>In Progress</option>
                    </select>
                </div>
            </div>
            <!-- second column -->
            <div class="col-md-7">
                <div class="row g-3">
                    <!-- height -->
                    <div class="col-sm-6">
                        <label for="height" class="form-label">Plant Height:</label>
                        <input class="form-control" type="number" id="height" name="height" step="0.01" placeholder="In meters" value="<%= plantsighting.plantSize.height %>" required>
                    </div>
                    <!-- spread -->
                    <div class="col-sm-6">
                        <label for="spread" class="form-label">Plant Spread:</label>
                        <input class="form-control" type="number" id="spread" name="spread" step="0.01" placeholder="In meters" value="<%= plantsighting.plantSize.spread %>" required>
                    </div>
                </div><br>
                <!-- description -->
                <div class="mb-3">
                    <label for="description" class="form-label">Description:</label>
                    <textarea class="form-control" id="description" name="description" rows="5" required><%= plantsighting.description %></textarea>
                </div>
                <!-- plant characteristics -->
                <div class="mb-3">
                    <label class="form-label">Plant Characteristics:</label>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="flowers" name="flowers" <%= plantsighting.plantCharacteristics.flowers ? 'checked' : '' %>>
                        <label class="form-check-label" for="flowers">Flowers</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="leaves" name="leaves" <%= plantsighting.plantCharacteristics.leaves ? 'checked' : '' %>>
                        <label class="form-check-label" for="leaves">Leaves</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="fruitsOrSeeds" name="fruitsOrSeeds" <%= plantsighting.plantCharacteristics.fruitsOrSeeds ? 'checked' : '' %>>
                        <label class="form-check-label" for="fruitsOrSeeds">Fruits or Seeds</label>
                    </div>
                </div>
                <!-- sun exposure -->
                <div class="mb-3">
                    <label for="sunExposure" class="form-label">Sun Exposure:</label>
                    <select class="form-control" id="sunExposure" name="sunExposure">
                        <option value="full sun" <%= plantsighting.plantCharacteristics.sunExposure === 'full sun' ? 'selected' : '' %>>Full Sun</option>
                        <option value="partial shade" <%= plantsighting.plantCharacteristics.sunExposure === 'partial shade' ? 'selected' : '' %>>Partial Shade</option>
                        <option value="full shade" <%= plantsighting.plantCharacteristics.sunExposure === 'full shade' ? 'selected' : '' %>>Full Shade</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="mb-3 text-center">
            <button type="submit" class="btn btn-success">Save Changes</button>
            <a class="btn btn-secondary" href="/display/<%= plantsighting._id %>">Cancel</a>
        </div>
    </form>

</div>
</body>
</html>

