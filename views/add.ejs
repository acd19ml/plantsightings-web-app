<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/add.css'/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container">
    <h1 class="text-center">Plant Sighting Form</h1>
    <br>
    <form action="/add" method="POST" enctype="multipart/form-data">
        <div class="row">
            <!--            first column-->
            <div class="col-md-5">
                <!--                nickname-->
                <div class="mb-3">
                    <label for="nickname" class="form-label">Nickname:</label>
                    <input class="form-control" type="text" id="nickname" name="nickname" required readonly>
                </div>
                <!--                data-->
                <div class="mb-3">
                    <label for="dateSeen" class="form-label">Date Seen:</label>
                    <input class="form-control" type="date" id="dateSeen" name="dateSeen" required>
                </div>
                <!--                photo-->
                <div class="mb-3">
                    <label for="photo" class="form-label">Photo URL:</label>
                    <input class="form-control" type="file" name="myImg" accept="image/*" required>
                </div>
                <!--                location-->
                <div class="mb-3">
                    <label for="location" class="form-label">Location (Longitude, Latitude):</label>
                    <input class="form-control" type="text" name="location" placeholder="e.g., -73.935242, 40.730610" required>
                </div>
                <!--                identification name-->
                <div class="mb-3">
                    <label for="identificationName" class="form-label">Identification Name:</label>
                    <input class="form-control" type="text" id="identificationName" name="identificationName" required>
                </div>
                <!--                identification status-->
                <div class="mb-3">
                    <label for="identificationStatus" class="form-label">Identification Status:</label>
                    <select class="form-control" type="text" id="identificationStatus" name="identificationStatus" required>
                        <option value="completed">Completed</option>
                        <option value="in-progress">In Progress</option>
                    </select>
                </div>
            </div>
            <!--            second column-->
            <div class="col-md-7">
                <div class="row g-3">
                    <!--                    height-->
                    <div class="col-sm-6">
                        <label for="height" class="form-label">Plant Height:</label>
                        <input class="form-control" type="number" id="height" name="height" step="0.01" placeholder="In meters" required>
                    </div>
                    <!--                    spread-->
                    <div class="col-sm-6">
                        <label for="spread" class="form-label">Plant Spread:</label>
                        <input class="form-control" type="number" id="spread" name="spread" step="0.01" placeholder="In meters" required>
                    </div>
                </div><br>
                <!--                description-->
                <div class="mb-3">
                    <label for="description" class="form-label">Description:</label>
                    <textarea class="form-control" id="description" name="description" rows="5" required></textarea>
                </div>
                <!--                plant characteristics-->
                <div class="mb-3">
                    <label for="plantCharacteristics" class="form-label">Plant Characteristics:</label>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="flowers" name="flowers">
                        <label class="form-check-label" for="flowers">Flowers</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="leaves" name="leaves">
                        <label class="form-check-label" for="leaves">Leaves</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="fruitsOrSeeds" name="fruitsOrSeeds">
                        <label class="form-check-label" for="fruitsOrSeeds">Fruits or Seeds</label>
                    </div>
                </div>
                <!--                sun exposure-->
                <div class="mb-3">
                    <label for="sunExposure" class="form-label">Sun Exposure:</label>
                    <select class="form-control" id="sunExposure" name="sunExposure">
                        <option value="full sun">Full Sun</option>
                        <option value="partial shade">Partial Shade</option>
                        <option value="full shade">Full Shade</option>
                    </select>
                </div>
            </div>
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
        <a class="btn btn-outline-info" href="/" role="button">View All Plant Sightings</a>
    </form>
    <script>
        // Wait for the DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Get the form element
            var form = document.querySelector('form');
            //// Attempt to retrieve the nickname from local storage
            var storedNickname = localStorage.getItem('nickname');

            if (storedNickname) {
                // Parse the stored nickname (since it was stored as JSON) and set it as the value of the input
                document.getElementById('nickname').value = JSON.parse(storedNickname);
            }
            // Add an event listener for the form submission
            form.addEventListener('submit', function(event) {
                // Prevent the form from submitting immediately
                event.preventDefault();

                // Get the nickname value
                var nickname = document.getElementById('nickname').value;

                // Store the nickname in local storage
                localStorage.setItem('nickname', JSON.stringify(nickname));

                // Continue with the form submission
                form.submit();
            });
        });
    </script>
</div>
</body>
</html>
